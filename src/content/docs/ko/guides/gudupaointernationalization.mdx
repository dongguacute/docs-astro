---
title: 구두파오 아스트로 i18n 플러그인
sidebar:
 label: 구두파오 아스트로 i18n 플러그인
description: "{{t.xxx}}, 로컬 언어 팩, 언어 전환 및 SSR 및 SSG와의 호환성을 지원하는 Astro i18n 플러그인입니다."
i18nReady: true
---

저희 플러그인은 직관적이면서도 강력하도록 설계된 Astro 프로젝트를 위한 완전한 기능의 i18n 솔루션을 제공합니다:

- 유연한 다국어 라우팅: 경로 기반 및 경로 없는 라우팅을 모두 지원합니다.
- 자동 언어 감지: 사용자의 브라우저 언어를 감지하고 우아하게 대체합니다.
- 맞춤형 언어 팩: 개발자가 로컬 JSON 파일에서 번역을 정의하고 구성할 수 있습니다.
- 간단한 번역 구문: 명확성과 유지 관리 용이성을 위해 \{\{t.xxx\}\}를 사용하여 번역에 액세스할 수 있습니다.
- 원활한 언어 전환: 복잡성 없이 런타임 언어 변경을 가능하게 합니다.
- 모드 호환성: Astro의 SSR(동적) 및 SSG(정적) 모드를 완전히 지원합니다.
- 크로스 프레임워크 지원: Astro의 세 가지 주요 작성 언어인 Astro, React 및 Vue에서 작동합니다.

## 설치

```
pnpm add @gudupao/astro-i18n
```



## 구성

### 개요

Astro-i18n은 다양한 옵션으로 구성되어 동작을 사용자 정의할 수 있습니다. 이 문서에서는 각 구성 옵션, 그 목적 및 기본값에 대해 자세히 설명합니다.

Astro-i18n은 두 가지 주요 작동 모드를 지원합니다:
- **경로 기반**: 언어는 URL 경로(예: `/en/about`, `/zh/about`)로 식별됩니다. 이는 `pathBasedRouting` 옵션에 의해 제어됩니다.
- **경로 없음**: URL 경로를 변경하지 않고 다른 수단(쿠키, Accept-Language 헤더)에 의해 언어가 결정됩니다. 이는 `pathBasedRouting` 옵션에 의해 제어됩니다.

### 공통 구성 옵션

이러한 옵션은 경로 기반 및 경로 없는 모드 모두에서 사용할 수 있습니다.

#### `localesDir`

- **유형**: `string`
- **설명**: 로케일 파일이 저장되는 디렉터리입니다.
- **기본값**: `'locales'`

예시:
```typescript
integrations: [
  astroI18nPlugin({
    localesDir: './my-locales'
 })
]
```

#### `fallbackLang`

- **유형**: `string`
- **설명**: 현재 언어에 대한 번역을 찾을 수 없는 경우 대체할 언어입니다.
- **기본값**: `'en'`

예시:
```typescript
integrations: [
 astroI18nPlugin({
    fallbackLang: 'zh'
  })
]
```

#### `autoDetectLanguage`

- **유형**: `boolean`
- **설명**: Accept-Language 헤더에서 사용자 언어를 자동으로 감지할지 여부입니다.
- **기본값**: `true`

예시(자동 감지 포함):
```typescript
integrations: [
  astroI18nPlugin({
    autoDetectLanguage: true
  })
]
```

예시(자동 감지 제외):
```typescript
integrations: [
  astroI18nPlugin({
    autoDetectLanguage: false
  })
]
```

#### `pathBasedRouting`

- **유형**: `boolean`
- **설명**: 경로 기반 라우팅을 사용할지 여부입니다. `true`이면 언어는 URL 경로(예: `/en/about`, `/zh/about`)로 식별됩니다. `false`이면 URL 경로를 변경하지 않고 다른 수단(쿠키, Accept-Language 헤더)에 의해 언어가 결정됩니다.
- **기본값**: `true`

이 옵션은 작동 모드를 결정합니다:
- `true`(기본값): 경로 기반 모드.
- `false`: 경로 없는 모드.

예시(경로 기반):
```typescript
integrations: [
  astroI18nPlugin({
    pathBasedRouting: true
  })
]
```

예시(경로 없음):
```typescript
integrations: [
  astroI18nPlugin({
    pathBasedRouting: false
  })
]
```

### 경로 기반 모드 구성(pathBasedRouting: true)

`pathBasedRouting`이 `true`이면 Astro-i18n은 경로 기반 모드에서 작동합니다. 모든 공통 구성 옵션이 적용됩니다.

### 경로 없는 모드 구성(pathBasedRouting: false)

`pathBasedRouting`이 `false`이면 Astro-i18n은 경로 없는 모드에서 작동합니다. 모든 공통 구성 옵션이 적용됩니다.

주요 차이점은 언어를 결정하는 방법과 URL을 처리하는 방법에 있습니다:
- 경로 기반 모드에서 언어는 URL 경로의 일부입니다.
- 경로 없는 모드에서 언어는 다른 수단(쿠키, Accept-Language 헤더)에 의해 결정되며 URL 경로는 변경되지 않습니다.

## 사용법


### 아스트로

```astro
---
import { getTranslator } from '@gudupao/astro-i18n';

// 매개변수에서 언어 가져오기
const lang = Astro.params.lang || 'en';
const t = getTranslator(lang);
---

<div>
  <h1>Astro 테스트: {t('hello')} {t('123.a')}</h1>
</div>
```

### 반응

```jsx
import React from 'react';
import { createClientTranslator } from '@gudupao/astro-i18n';
import type { Translations } from '@gudupao/astro-i18n';

const TestComponent = ({ translations }: { translations: Translations }) => {
  const t = createClientTranslator(translations);
  
  return (
    <div>
      <h1>React 테스트: {t('hello')} {t('123.a')}</h1>
    </div>
  );
};

export default TestComponent;
```

### 뷰

```vue
<template>
 <div>
    <h1>Vue 테스트: {{ t('hello') }} {{ t('123.a') }}</h1>
  </div>
</template>

<script setup lang="ts">
import { createClientTranslator } from '@gudupao/astro-i18n';
import type { Translations } from '@gudupao/astro-i18n';

interface Props {
  translations: Translations;
}

const props = defineProps<Props>();
const t = createClientTranslator(props.translations);
</script>
```

## 언어 전환기 예제

### 경로 기반 버전

```astro
---
interface Props {
  lang: string;
}

const { lang } = Astro.props;
---

<script is:inline>
 function switchLanguage(language) {
    // 언어 쿠키 설정
    document.cookie = `lang=${language}; path=/; max-age=31536000; samesite=lax`;
    console.log('[LanguageSwitcher] 언어 쿠키 설정:', language);
    
    const urlParts = window.location.pathname.split('/');
    urlParts[1] = language;
    window.location.href = urlParts.join('/');
  }

  const currentPath = window.location.pathname;
  const urlParts = currentPath.split('/');
</script>

<div class="language-switcher">
  <button
    onclick="switchLanguage('en')"
    class={lang === 'en' ? 'active' : ''}
  >
    English
  </button>
  <button
    onclick="switchLanguage('zh')"
    class={lang === 'zh' ? 'active' : ''}
  >
    中文
  </button>
    <button
    onclick="switchLanguage('jp')"
    class={lang === 'jp' ? 'active' : ''}
  >
    日本語
  </button>
</div>

<style>
.language-switcher {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.language-switcher button {
  padding: 5px 10px;
  border: none;
  background: #f0f0f0;
  border-radius: 5px;
  cursor: pointer;
}

.language-switcher button.active {
  background: #007bff;
  color: white;
}
</style>
```

### 경로 없는 버전

```astro
---
// 사용 가능한 모든 언어 가져오기
const { getAvailableLanguages } = await import('@gudupao/astro-i18n');
const availableLanguages = getAvailableLanguages();

interface Props {
  pathBasedRouting?: boolean; // 경로 기반 라우팅 모드를 사용할지 여부
}

const { pathBasedRouting = true } = Astro.props;

// 현재 언어를 감지하는 함수
function detectCurrentLanguage() {
  // 먼저 URL 매개변수 확인
  const urlParams = new URLSearchParams(Astro.url.search);
  const langParam = urlParams.get('lang');
  if (langParam) return langParam;

  // 그런 다음 쿠키 확인
  const cookies = Astro.request.headers.get('cookie');
  if (cookies) {
    const cookieObj = Object.fromEntries(
      cookies.split(';').map(cookie => {
        const [name, value] = cookie.trim().split('=');
        return [name, decodeURIComponent(value)];
      })
    );
    if (cookieObj.lang) return cookieObj.lang;
 }

  // 기본 언어 반환
  return 'en';
}

// 현재 언어 가져오기
const currentLang = detectCurrentLanguage();
---

<div class="language-switcher">
  <h3>언어 전환기 (새 버전)</h3>
  <p>현재 모드: {pathBasedRouting ? '경로 기반 라우팅' : '경로 없는 라우팅'}</p>
  <div class="switcher-buttons">
    {availableLanguages.map((language) => (
      <button
        data-lang={language}
        class={language === currentLang ? 'active' : ''}
        onclick={`switchLanguage('${language}', ${pathBasedRouting})`}
      >
        {language === 'en' && 'English'}
        {language === 'zh' && '中文'}
        {language === 'jp' && '日本語'}
        {language !== 'en' && language !== 'zh' && language !== 'jp' && language}
      </button>
    ))}
  </div>
</div>

<script is:inline>
  // 언어를 전환하는 함수
  function switchLanguage(language, pathBasedRouting) {
    if (pathBasedRouting) {
      // 경로 기반 라우팅 모드
      // 언어 쿠키 설정
      document.cookie = `lang=${language}; path=/; max-age=31536000; samesite=lax`;
      console.log('[LanguageSwitcher] 언어 쿠키 설정:', language);
      
      const urlParts = window.location.pathname.split('/');
      urlParts[1] = language;
      window.location.href = urlParts.join('/');
    } else {
      // 경로 없는 라우팅 모드
      // 언어 쿠키 설정
      document.cookie = `lang=${language}; path=/; max-age=31536000; samesite=lax`;
      // 로컬스토리지 설정
      localStorage.setItem('lang', language);
      // 새 언어를 적용하기 위해 페이지 새로 고침
      window.location.reload();
    }
  }
</script>

<style>
.language-switcher {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 20px 0;
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
  background-color: #f9f9f9;
}

.switcher-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.language-switcher button {
  padding: 8px 12px;
  border: none;
  background: #f0f0f0;
  border-radius: 5px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.language-switcher button:hover {
  background: #e0e0e0;
}

.language-switcher button.active {
  background: #007bff;
  color: white;
}

.language-switcher h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
  color: #333;
}

.language-switcher p {
  margin: 0 0 10px 0;
  font-size: 14px;
  color: #666;
}
</style>
```

## 링크

- 소스 코드 저장소: [https://github.com/GudupaoSpark/Astro-i18n](https://github.com/GudupaoSpark/Astro-i18n)
- npmjs: [https://www.npmjs.com/package/@gudupao/astro-i18n](https://www.npmjs.com/package/@gudupao/astro-i18n)
- 원본 문서: [https://astro-i18n.gudupao.top](https://astro-i18n.gudupao.top)
